<div id="hero-view">
    <div class="image fade_on_ready"><img class="scale" src="https://mountainrush-assets.imgix.net/clients/<%= Campaign.CampaignTemplate %>/pages/default.jpg?fm=jpg&q=80&w=1280"></div>

    <div class="hero-container">
        <div class="campaign-title">
            <div class="campaign-tagline">
            Run with Midnight Runners
            </div>
            <div class="campaign-tagline2 visible-xs">
            and race the<br/>Mogadishu Marathon
            </div>
            <div class="campaign-tagline2 hidden-xs">
            and race the<br/>Mogadishu Marathon
            </div>
            <div class="campaign-tagline3 visible-xs">
            Not everyone can run when they want, where they want.<br/>Support Somali runners by virtually running a Mogadishu<br/>Marathon race from wherever you are.
            </div>
            <div class="campaign-tagline3 hidden-xs">
            Not everyone can run when they want, where they want.<br/>Support Somali runners by virtually running a Mogadishu<br/>Marathon race from wherever you are.
            </div>
        </div>
    </div>
</div>

<div id="challenges-view">
    <div id="challenges-loader-view" class="loader-view">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    </div>

    <div id="challenges-content-view"></div>
</div>

<div id="intro-view">
    <div class="intro-container-view">
        <h1>Samia Yusuf Memorial Run</h1>
        <h2>The Mogadishu Marathon honors Samia Yusuf Omar, an Olympic runner from Somalia, who drowned attempting to cross the Mediterranean Sea in 2008.</h2>
        <div class="text">Although she met the same fate as many refugees around the world, her story is that of an incredibly strong and resistant female runner, fighting the status quo, and dreaming of the freedom to run.
        </div>

        <div class="video-container">
            <div class="video">
                <video id="media_intro" url="https://mountainrush-assets.imgix.net/marketing/demo/MountainRush.mp4" class="media-player video-js vjs-default-skin" controls preload="none" width="auto" height="auto" poster="https://mountainrush-assets.imgix.net/marketing/demo/180201_MountainRush.png">
                    <p class="vjs-no-js">To view this video please enable JavaScript, and consider upgrading to a web browser that <a href="http://videojs.com/html5-video-support/" target="_blank">supports HTML5 video</a></p>
                </video>
            </div>
        </div>

        <div class="btns">
            <span class="visible-xs"><a class="btn mr-btn btn-primary" href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/register"><%= __('defs.countmein') %></a></span>
            <span class="hidden-xs"><a class="btn mr-btn btn-primary double" href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/register"><div><%= __('defs.countmein') %></div><div><i class="fa fa-arrow-right"></i></div></a></span>
        </div>
    </div>
</div>

<div id="howtoguide-view">
    <div class="howtoguide-container-view">
        <h1>How to get started</h1>
        <div class="steps-container-view">
            <div class="step-view">
                <div class="image" style="background-image: url('/static-assets/images/<%= Campaign.CampaignTemplate %>/howtoguide/step_icon1@2x.png')"></div>
                <h2><%= __('how_to_guide.challenge.title') %></h2>
                <%- __('how_to_guide.challenge.description').replace(/\n/g, '<br/>') %>
            </div>
            <div class="step-view">
                <div class="image" style="background-image: url('/static-assets/images/<%= Campaign.CampaignTemplate %>/howtoguide/step_icon2@2x.png')"></div>
                <h2>
                    <%= __('how_to_guide.active.title') %></h2>
                <%- __('how_to_guide.active.description', '<a class="link" href="https://www.strava.com/mobile" target="_blank">' +  __('defs.strava_app') + '</a>').replace(/\n/g, '<br/>') %>
            </div>
            <div class="step-view">
                <div class="image" style="background-image: url('/static-assets/images/<%= Campaign.CampaignTemplate %>/howtoguide/step_icon3@2x.png')"></div>
                <h2><%= __('how_to_guide.fundraise.title') %></h2>
                <%- __('how_to_guide.fundraise.description').replace(/\n/g, '<br/>') %>
            </div>
        </div>

        <div class="btns">
            <span class="visible-player-active"><a class="btn mr-btn btn-primary double" href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/gamecreate"><div><%= __('defs.challenge.create') %></div><div><i class="fa fa-arrow-right"></i></div></a></span>
            <span class="visible-player-inactive"><a class="btn mr-btn btn-primary double" href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/register"><div><%= __('defs.signup') %></div><div><i class="fa fa-arrow-right"></i></div></a></span>
        </div>
    </div>
</div>

<div id="community-climber-feature-view">
    <div id="community-feature-loader-view" class="loader-view">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    </div>

    <div id="community-feature-view"></div>
</div>

<div id="summary-view">
    <div class="summary-container">
        <div id="summary-loader-view" class="loader-view">
            <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
            </div>
        </div>
        <div id="campaign-summary-view"></div>
    </div>
</div>

<div id="supporter-search-view">
    <div class="supporter-search-container">
        <div class="supporter-search-content">
            <h1>Find a <span class="show-when-signed-in">fellow </span>climber</h1>
            <div class="search-panel search suggest ui-front">
                <div class="search-location">
                    <input name="search-text" id="search-text" class="search-field" type="text" placeholder="Climber" spellcheck="false">
                </div>
            </div>
        </div>
    </div>
</div>

<div id="community-view">
    <h1>Journey to the Summit</h1>
    <h2>Follow our mountain rush climbers</h2>
    <div class="text">#playmountainrush</div>

    <div id="community-photos-loader-view" class="loader-view">
        <div class="spinner">
            <div class="double-bounce1"></div>
            <div class="double-bounce2"></div>
        </div>
    </div>

    <div id="community-photos-view" class="photos"></div>

    <div class="btns">
        <span class="visible-player-active"><a class="btn mr-btn btn-primary double" href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/gamecreate"><div><%= __('defs.challenge.create') %></div><div><i class="fa fa-arrow-right"></i></div></a></span>
        <span class="visible-player-inactive"><a class="btn mr-btn btn-primary double" href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/register"><div><%= __('defs.signup') %></div><div><i class="fa fa-arrow-right"></i></div></a></span>
    </div>
</div>

<script type="text/template" id="challengesContentViewTemplate">
    <div class="cards-container">
        <div class="cards">
        {{ _.each(challenges, function(challenge, index) { }}
        <div class="card">
            <div class="image"><img class="scale" src="https://mountainrush-assets.imgix.net/challenges/{{= challenge.image }}?fm=jpg&w=640&q=80"></div>
            <div class="content">
                <h2>{{= challenge.name }}</h2>
                <div class="overview">
                    <strong>{{= challenge.region }}</strong>
                    {{ if (challenge.distance > 0) { }}
                    {{= (challenge.distance / 1000).toFixed(0) }}km Challenge
                    {{ } else { }}
                    Climb {{= challenge.ascent }}m
                    {{ } }}
                </div>
                <a href="<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>/level/{{= challenge.id }}/gamecreate" class="btn mr-btn btn-primary">Select race</a>
            </div>
        </div>
        {{ }); }}
        </div>
    </div>
</script>

<script type="text/template" id="socialFeatureViewTemplate">
    <div class="community-feature-container-view">
        {{ var firstPost = juicer.posts.items[0] }}

        {{ if (firstPost) { }}
            <h1>#{{= firstPost.source.term }}</h1>
        {{ } }}

        {{ _.each(juicer.posts.items, function(post, index) { }}
        <div class="content">
            <div class="image"><a href="{{= post.full_url }}" target="_blank"><img src="{{= post.image }}"></a></div>
            <div class="text">
                {{= post.message }}
                <div class="engagement">
                    {{ if (post.likes >= 1) { }}
                    <span class="likes"><i class="icon fa fa-heart"></i> {{= post.likes }}</span>
                    {{ } }}

                    {{ if (post.comments >= 1) { }}
                    <i class="icon fa fa-comment"></i> {{= post.comments }}
                    {{ } }}
                </div>
            </div>
        </div>
        {{ }); }}
    </div>
</script>

<script type="text/template" id="campaignSummaryViewTemplate">
    <div class="summary-total-raised">
        <div class="total-raised-sticker">
            <div class="total"><span class="currency_symbol">{{ if (fundraising_currency_symbol.length > 1) { }}<span class="fat-currency-symbol">{{= fundraising_currency_symbol }}</span>{{ } else { }}{{= fundraising_currency_symbol }}{{ } }}</span>{{= Math.round(total_raised) }}</div>
            <div class="break"></div>
            <div class="title">Total Raised</div>
            <div class="title-sub">by climb for your world</div>
        </div>
    </div>

    <div class="summary-break"></div>

    <div class="summary-total-climbed">
        <div class="total">{{= total_players }}</div>
        <div class="title">Players</div>
    </div>
</script>

<script type="text/template" id="leaderboardViewTemplate">
    {{ _.each(players, function(player, index) { }}
    <div class="leader">
        <div class="content">
            <div class="marker">
                {{ var strURL = '<%= Defs.BaseHTTPSURL %>/campaign/<%= Campaign.CampaignID %>' }}
                {{ if (player.gameID) { }}
                {{ strURL = '<%= Defs.BaseHTTPSURL %>/game/' + player.gameID + '/player/' + player.id }}
                {{ } }}
                <a href="{{= strURL }}"><div class="avatar">
                        <% if (Campaign.CampaignTemplate == 'default') { %>
                            <img src="<%= Defs.MRAPIURL %>imageproxy.php?url={{= player.avatar }}">
                        <% } else { %>
                            <img src="<%= Defs.MRAPIURL %>imageproxy.php?url={{= player.avatar }}&urlfallback=https://www.mountainrush.co.uk/static-assets/images/<%= Campaign.CampaignTemplate %>/avatar_unknown.jpg">
                        <% } %>
                    </div></a>
            </div>
            <div class="fundraise-detail">
                <div class="name">{{= player.firstname }} {{= player.lastname }}</div>
                <div class="climbed">Climbed {{= Math.round(player.ascent) }} m</div>
                <div class="amount-detail">Raised<span class="amount">
          {{ if (player.fundraising_currency_symbol) { }}{{ if (player.fundraising_currency_symbol.length > 1) { }}<span class="fat-currency-symbol">{{= player.fundraising_currency_symbol }}</span>{{ } else { }}{{= player.fundraising_currency_symbol }}{{ } }}{{ } else { }}${{ } }}{{= Math.round(player.fundraising_raised) }}</span>
                </div>
            </div>
        </div>
    </div>
    {{ }); }}
</script>

<script type="text/template" id="communityPhotosViewTemplate">
    {{ _.each(juicer.posts.items, function(post, index) { }}<div class="post">
        <div class="media">
            <a href="{{= post.full_url }}" target="_blank"><div class="image" style="background-image: url('{{= post.image }}')"></div>
                <div class="likes ago">
                    {{ if (post.likes >= 1) { }}
                    <i class="icon fa fa-heart"></i> {{= post.likes }}
                    {{ } }}
                </div>
            </a>
        </div>
        <div class="details">
            <div class="text">
                <div class="name"><a href="{{= post.full_url }}" target="_blank">{{= post.poster_name }}</a></div>
                <div class="credit truncate"  data-truncate="62"> {{= post.message }}</div>
            </div>
        </div>
    </div>{{ }); }}
</script>

<script type="text/template" id="playerGameViewTemplate">
    <div class="modal msg-overlay" tabindex="-1" role="dialog">
        <div class="modal-dialog" role="document">
            <div class="modal-content">
                <div class="modal-body">
                    {{ var activeGames = _.where(player.games, {game_state:'active'}) }}
                    {{ var pendingGames = _.where(player.games, {game_state:'pending'}) }}

                    {{ if (activeGames.length) { }}
                    {{ var currGame = activeGames[0] }}

                    {{ activityDescription = '' }}

                    {{ if (currGame.type == 'Run') { }}
                    {{ activityDescription = '<%= __('defs.activities.run') %>' }}
                    {{ } else if (currGame.type == 'Ride') { }}
                    {{ activityDescription = '<%= __('defs.activities.ride') %>' }}
                    {{ } else if (currGame.type == 'Hike') { }}
                    {{ activityDescription = '<%= __('defs.activities.hike') %>' }}
                    {{ } }}

                    <div class="details">
                        <div class="title"><%= __('overlay.challenge.latest.title') %></div>
                        <div class="description">
                            {{= '<%= __('overlay.challenge.latest.description') %>'.replace('%s', player.firstname).replace('%s', '<strong>' + currGame.name + '</strong> <span class="lowercase">' + activityDescription + '</span>') }}
                        </div>
                    </div>

                    <div class="action-fields">
                        <div class="action-field"><a href="<%= Defs.BaseHTTPSURL %>/game/{{= currGame.game }}" class="btn mr-btn btn-primary"><%= __('overlay.challenge.yes') %></a></div>
                        <div class="action-field"><span class="btn mr-btn" data-dismiss="modal"><%= __('overlay.challenge.no') %></span></div>
                    </div>
                    {{ } else if (pendingGames.length) { }}
                    {{ var currGame = pendingGames[0] }}

                    {{ activityDescription = '' }}

                    {{ if (currGame.type == 'Run') { }}
                    {{ activityDescription = '<%= __('defs.activities.run') %>' }}
                    {{ } else if (currGame.type == 'Ride') { }}
                    {{ activityDescription = '<%= __('defs.activities.ride') %>' }}
                    {{ } else if (currGame.type == 'Hike') { }}
                    {{ activityDescription = '<%= __('defs.activities.hike') %>' }}
                    {{ } }}

                    <div class="details">
                        <div class="title"><%= __('overlay.challenge.upcoming.title') %></div>
                        <div class="description">
                            {{= '<%= __('overlay.challenge.upcoming.description') %>'.replace('%s', player.firstname).replace('%s', '<strong>' + currGame.name + '</strong> <span class="lowercase">' + activityDescription + '</span>') }}
                        </div>
                    </div>

                    <div class="action-fields">
                        <div class="action-field"><a href="<%= Defs.BaseHTTPSURL %>/game/{{= currGame.game }}" class="btn mr-btn btn-primary">Yes please</a></div>
                        <div class="action-field"><span class="btn mr-btn" data-dismiss="modal">Maybe later</span></div>
                    </div>
                    {{ } }}
                </div>
            </div><!-- /.modal-content -->
        </div><!-- /.modal-dialog -->
    </div><!-- /.modal -->
</script>
