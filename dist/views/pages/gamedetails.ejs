<!DOCTYPE html>
<html>
<head>
<% include ../partials/includes.ejs %>
<link href='/static-assets/css/photoswipe.css' rel='stylesheet' />
<link href='/static-assets/css/default-skin/default-skin-with-ig.css' rel='stylesheet' />
<% if (Campaign.CampaignTemplate != 'default') { %>
  <link href='/static-assets/css/<%= Campaign.CampaignTemplate %>/web_platform.css' rel='stylesheet' />
<% } %>
<link href='/static-assets/css/gamedetails.css' rel='stylesheet' />
<% if (Campaign.CampaignTemplate != 'default') { %>
  <link href='/static-assets/css/<%= Campaign.CampaignTemplate %>/gamedetails.css' rel='stylesheet' />
<% } %>
<link href="http://api.tiles.mapbox.com/mapbox.js/v3.2.0/mapbox.css" rel="stylesheet">
<% include ../partials/analyticsFBPixel.ejs %>
</head>

<body>
<script>
var APP = 'GameDetailsApp';
var GAME_API_URL = '<%= Defs.MRAPIURL %>';
var HOST_URL = '<%= Defs.BaseHTTPSURL %>';
var GAME_FUNDRAISING = <%= Campaign.CampaignFundraising %>;
var CLIENT_ID = '<%= Campaign.ClientID %>';
var CAMPAIGN_ID = '<%= Campaign.CampaignID %>';
var CAMPAIGN_TEMPLATE = '<%= Campaign.CampaignTemplate %>';
var GAME_ID = '<%= Defs.GameID %>';
var FUNDRAISING_PROVIDER = '<%= Campaign.CampaignFundraisingProvider %>';
var TEST_PROGRESS = '';
</script>

<div class="container-fluid nopadding">
  <div id="page-view">
    <% if (Campaign.CampaignTemplate == 'default') { %>
      <% include ../partials/header.ejs %>
    <% } else { %>
      <%- include('../partials/' + Campaign.CampaignTemplate + '/header.ejs') %>
    <% } %>

    <div id="game-view">
      <div id="sponsor-big-container-view"></div>

      <div id="map-view">
        <div id="mapbox-view" class="map"></div>

        <div class="map-overlay"></div>

        <div class="embelish embelish-left"></div>
        <div class="embelish embelish-right"></div>

        <div class="overlay-loader-view">
          <div class="overlay-loader">
            <div id="loader-view">
              <div class="spinner">
                <div class="double-bounce1"></div>
                <div class="double-bounce2"></div>
              </div>
            </div>
          </div>
        </div>

        <div class="game-details-container">
          <div class="countdown-container" data-value-day="<%= __n('game.day', 1) %>" data-value-days="<%= __n('game.day', 2) %>">
            <div class="countdown">
              <span class="clock"></span>
              <span class="end">
                <span class="days"><span class="time">0</span><span class="days-marker"> <%= __n('game.day', 2) %></span></span>
                <span class="hours"><span class="time"><span>00</span><span class="marker">:</span><span>00</span><span class="marker">:</span><span>00</span></span></span>
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>

    <div id="player-view">
      <div class="list" id="players-list-view"></div>
    </div>

    <div class="stripe top"></div>
  </div>

  <div class="show-when-ready">
    <% if (Campaign.CampaignTemplate == 'default') { %>
      <% include ../partials/footer.ejs %>
    <% } else { %>
      <%- include('../partials/' + Campaign.CampaignTemplate + '/footer.ejs') %>
    <% } %>
  </div>
</div>

<div id="challenge-cancel-modal-view"></div>
<div id="invite-friend-modal-view">
  <div class="modal msg-overlay" tabindex="-1" role="dialog">
    <div class="modal-dialog" role="document">
      <div class="modal-content">
        <div class="modal-body">
          <div class="details">
            <div id="game-invite-view"></div>
          </div>
        </div>
      </div><!-- /.modal-content -->
    </div><!-- /.modal-dialog -->
  </div><!-- /.modal -->
</div>

<div id="demo-video-view"></div>

<div id="mobileTest" class="visible-xs"></div>

<script type="text/template" id="sponsorBigViewTemplate">
  <div class="sponsor-view hidden-xs">
    <div class="sponsor-detail-view">
      {{ if (game.name == 'ashmei Mont Blanc') { }}
        <div class="logo">
          <a href="https://ashmei.com/challengethirtyone" target="_blank"><img src="/static-assets/images/logos/logo_ashmei.png"></a></div>
        <div class="title">
          <h1>Challenge 31<br/>December</h1>
          <h2>Climb Mont Blanc with <a href="https://ashmei.com/challengethirtyone" target="_blank" class="link"><strong>ashmei</strong></a></h2>
        </div>
      {{ } else { }}
        <div class="logo">
          <a href="https://www.wwf.org.uk/" target="_blank"><img src="/static-assets/images/logos/logo_wwf_demo.png"></a></div>
        <div class="title">
          <h1>{{= game.name }}<br/>Challenge</h1>
          <h2>Fundraising for <strong>WWF-UK</strong></h2>          
        </div>
      {{ } }}      

      <div class="detail">
        <div class="countdown-container" data-value-day="<%= __n('game.day', 1) %>" data-value-days="<%= __n('game.day', 2) %>">
          <div class="countdown">
            <span class="clock"></span>
            <span class="end">
              <span class="days"><span class="time">0</span><span class="days-marker"> <%= __n('game.day', 2) %></span></span>
              <span class="hours"><span class="time"><span>00</span><span class="marker">:</span><span>00</span><span class="marker">:</span><span>00</span></span></span>
            </span>
          </div>
        </div>

        <div class="donate-btn"><a href="<%= Defs.BaseHTTPSURL %>/game/<%= Defs.GameID %>" data-href="<%= Defs.BaseHTTPSURL %>/game/<%= Defs.GameID %>/player/[PLAYER_ID]/donate?amount=1000" class="btn mr-btn btn-primary btn-large btn-invert-hover"><%= __('defs.donate') %></a></div>
      </div>
    </div>
  </div>
</script>

<script type="text/template" id="playersListTemplate">
  {{ _.each(players, function(player, index) { }}
    
    <div class="photo">
      <div class="avatar"><img src="{{= player.avatar }}"></div>
      <div class="photo-icon {{ if (player.mediaCaptured) { }}show{{ } }}"><i class="fa fa-camera"></i></div>
    </div>
    
  {{ }); }}

  {{ if (activePlayer) { }}
    <div class="hidden-xs hidden-sm">
    <% include ../partials/gameFuncsTemplate.ejs %>
    </div>
  {{ } }}
</script>

<% include ../partials/challengeCancelTemplate.ejs %>
<% include ../partials/inviteFriendTemplate.ejs %>
<% include ../partials/demoVideoTemplate.ejs %>
<% include ../partials/analytics.ejs %>
</body>

<script data-main="/static-assets/js/main" src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.5/require.min.js"></script>
</html>